{{ set(this, 'title', 'My News') }}

{% set limit = 30 %}
{% set userPosts = _User.getUserFeed({limit: limit, offset: 0}) %}

{{this.registerJs("UserArticlesController.load();")}}
<div class="section section--local">
    <div class="">
        <div class="section__header-container">
            <div class="section--left">
                <h3 class="sub-heading">My News</h3>
            </div>
        </div>
    </div>
    
    <div class="section__content">
        {% if userPosts|length > 0 %}
            <div class="row">
                    {% if userPosts[0] is defined %}
                            {{this.render('partials/_single-article.twig', {article: userPosts[0], containerClass: 'col-full', cardClass : 'card__news card--rural'}) | raw}}
                    {% endif %}
                </div>
            <div class="row">
                {% for i in 1..3 %}
                    {% if userPosts[i] is defined %}
                        {{this.render('partials/_single-article.twig', {article: userPosts[i], containerClass: 'col-third', cardClass : 'card__news card--local'}) | raw}}
                    {% endif %}
                {% endfor %}

                {% for i in 4..6 %}
                    {% if userPosts[i] is defined %}
                        {{this.render('partials/_single-article.twig', {article: userPosts[i], containerClass: 'col-third', cardClass : 'card__news card--local'}) | raw}}
                    {% endif %}
                {% endfor %}
            </div>
            <div class="row">
                {% for i in 7..11 %}
                    {% if userPosts[i] is defined %}
                        {{this.render('partials/_single-article.twig', {article: userPosts[i], containerClass: 'col-third', cardClass : 'card__news card--local'}) | raw}}
                    {% endif %}
                {% endfor %}
                {% for i in 12..14 %}
                    {% if userPosts[i] is defined %}
                        {{this.render('partials/_single-article.twig', {article: userPosts[i], containerClass: 'col-third-short', cardClass : 'card__news card--local'}) | raw}}
                    {% endif %}
                {% endfor %}
            </div>

            <div class="row">
                {% for i in 15..19 %}
                    {% if userPosts[i] is defined %}
                        {{this.render('partials/_single-article.twig', {article: userPosts[i], containerClass: 'col-third', cardClass : 'card__news card--local'}) | raw}}
                    {% endif %}
                {% endfor %}

                {% for i in 20..22 %}
                    {% if userPosts[i] is defined %}
                        {{this.render('partials/_single-article.twig', {article: userPosts[i], containerClass: 'col-third-short', cardClass : 'card__news card--local'}) | raw}}
                    {% endif %}
                {% endfor %}
            </div>

            <div class="row">
                {% for i in 23..27 %}
                    {% if userPosts[i] is defined %}
                        {{this.render('partials/_single-article.twig', {article: userPosts[i], containerClass: 'col-third', cardClass : 'card__news card--local'}) | raw}}
                    {% endif %}
                {% endfor %}
                {% for i in 28..30 %}
                    {% if userPosts[i] is defined %}
                        {{this.render('partials/_single-article.twig', {article: userPosts[i], containerClass: 'col-third-short', cardClass : 'card__news card--local'}) | raw}}
                    {% endif %}
                {% endfor %}      
            </div>
            {% if userPosts | length >= limit %}       
                <div class="LoadMyArticles" data-page="2" ></div>
                <a href="javascript:void(0)" class="section__link loadMoreMyArticles">Load more <i class="fa fa-refresh"></i></a>
            {% endif %}     
        {% else %}
            <div class="row ">
                <div class="col-md-12 col-xs-12">
                    <p class="no-data text-center">To get a customised feed of content follow channels, authors or blogs in the network</p>
                </div>
            </div>
        {% endif %}
    </div>
</div>

